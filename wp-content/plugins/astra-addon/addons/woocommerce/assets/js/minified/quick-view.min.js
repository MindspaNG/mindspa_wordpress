!function(c){"undefined"!=typeof astra&&(AstraProQuickView={stick_add_to_cart:astra.shop_quick_view_stick_cart,auto_popup_height_by_image:astra.shop_quick_view_auto_height,init:function(){this._init_popup(),this._bind()},_init_popup:function(){c("#ast-quick-view-content,#ast-quick-view-content div.product").css({"max-width":parseFloat(c(window).width())-120,"max-height":parseFloat(c(window).height())-120});var i=c(".ast-qv-on-image-click .astra-shop-thumbnail-wrap .woocommerce-LoopProduct-link");0<i.length&&i.each(function(i){c(this).attr("href","javascript:void(0)")})},_bind:function(){c(document).off("click",".ast-quick-view-button, .ast-quick-view-text, .ast-qv-on-image-click .astra-shop-thumbnail-wrap .woocommerce-LoopProduct-link").on("click",".ast-quick-view-button, .ast-quick-view-text, .ast-qv-on-image-click .astra-shop-thumbnail-wrap .woocommerce-LoopProduct-link",AstraProQuickView._open_quick_view),c(document).on("click","#ast-quick-view-close",AstraProQuickView._close_quick_view),c(document).on("click",".ast-content-main-wrapper",AstraProQuickView._close_quick_view_on_overlay_click),c(document).on("keyup",AstraProQuickView._close_quick_view_on_esc_keypress)},_open_quick_view:function(i){i.preventDefault();var t=c(this),e=t.closest("li.product"),a=c(document).find("#ast-quick-view-modal"),i=c(document).find(".ast-quick-view-bg"),t=t.data("product_id");e.hasClass("ast-qv-on-image-click")&&(t=e.find(".ast-quick-view-data").data("product_id")),a.hasClass("loading")||a.addClass("loading"),i.hasClass("ast-quick-view-bg-ready")||i.addClass("ast-quick-view-bg-ready"),c(document).trigger("ast_quick_view_loading"),c.ajax({url:astra.ajax_url,type:"POST",dataType:"html",data:{action:"ast_load_product_quick_view",product_id:t},success:function(i){c(document).find("#ast-quick-view-modal").find("#ast-quick-view-content").html(i),AstraProQuickView._after_markup_append_process()}})},_after_markup_append_process:function(){var i,t,e=c(document).find("#ast-quick-view-modal"),a=e.find("#ast-quick-view-content"),s=a.find(".variations_form");e.hasClass("open")||(i=a.outerHeight(),t=c(window).height(),a=c("html"),t<i?a.css("margin-right",AstraProQuickView._get_scrollbar_width()):(a.css("margin-right",""),a.find(".ast-sticky-active, .ast-header-sticky-active, .ast-custom-footer").css("max-width","100%")),a.addClass("ast-quick-view-is-open")),0<s.length&&(s.trigger("check_variations"),s.trigger("reset_image"),s.wc_variation_form(),s.find("select").change());s=e.find(".ast-qv-image-slider");1<s.find("li").length&&s.flexslider(),setTimeout(function(){AstraProQuickView._auto_set_content_height_by_image(),e.removeClass("loading").addClass("open"),c(".ast-quick-view-bg").addClass("open")},100),c(document).trigger("ast_quick_view_loader_stop")},_auto_set_content_height_by_image:function(){c("#ast-quick-view-modal").imagesLoaded().always(function(i){var t=c(document).find("#ast-quick-view-modal"),e=t.find(".woocommerce-product-gallery__image img").outerHeight();summary=t.find(".product .summary.entry-summary"),content=summary.css("content"),summary_content_ht=t.find(".summary-content").outerHeight();var a,s=t.find(".woocommerce-product-gallery__image img, .ast-qv-slides img"),o=parseFloat(c(window).height())-120,e=parseFloat(e);AstraProQuickView.auto_popup_height_by_image?s.length?e<o?summary.css("max-height",parseFloat(e)):summary.css("max-height",o):summary.css("width","100%"):summary.css("max-height",parseFloat(o)),AstraProQuickView.stick_add_to_cart&&(t.addClass("stick-add-to-cart"),a=t.find(".cart").outerHeight(),s=parseFloat(o)-parseFloat(a),a<e?(t.find(".cart").addClass("stick"),o=c("#ast-quick-view-content").outerHeight(),a=t.find(".cart").outerHeight(),s=parseFloat(o)-parseFloat(a),summary.css("max-height",parseFloat(s))):s<o?summary.css("max-height",parseFloat(o)):summary.css("max-height",""))})},_close_quick_view_on_esc_keypress:function(i){i.preventDefault(),27===i.keyCode&&AstraProQuickView._close_quick_view()},_close_quick_view:function(i){i&&i.preventDefault(),c(document).find(".ast-quick-view-bg").removeClass("ast-quick-view-bg-ready"),c(document).find("#ast-quick-view-modal").removeClass("open").removeClass("loading"),c(".ast-quick-view-bg").removeClass("open"),c("html").removeClass("ast-quick-view-is-open"),c("html").css("margin-right",""),setTimeout(function(){c(document).find("#ast-quick-view-modal").find("#ast-quick-view-content").html("")},600)},_close_quick_view_on_overlay_click:function(i){this===i.target&&AstraProQuickView._close_quick_view()},_get_scrollbar_width:function(){var i=c('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');c("body").append(i);var t=c("div",i).innerWidth();i.css("overflow-y","scroll");var e=c("div",i).innerWidth();return c(i).remove(),t-e}},c(function(){AstraProQuickView.init()}))}(jQuery);